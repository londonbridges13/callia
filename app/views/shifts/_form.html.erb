<%= form_for(@shift) do |f| %>
  <% if @shift.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@shift.errors.count, "error") %> prohibited this shift from being saved:</h2>

      <ul>
      <% @shift.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <div class="form-group"><label class="col-sm-2 control-label">Start Time</label>
    <div class="col-sm-10">
          <%= f.datetime_select :start_time %>
    </div>
    </div>
  </div>

  <br/>

  <div class="field">
    <div class="form-group"><label class="col-sm-2 control-label">End Time</label>
    <div class="col-sm-10">
      <%= f.datetime_select :end_time %>
    </div>
    </div>
  </div>

  <br/>
  <br/>

  <div class="field">
    <div class="form-group"><label class="col-sm-2 control-label">Select Caregiver</label>
      <div class="row">
        <div class="col-sm-4">
          <%= f.collection_select :caregiver_id, current_user.caregivers, :id, :name,
            {:class => 'prevent_collapse'},:class => "form-control m-b", :include_blank => 'Select' %>
        </div>
      </div>
    </div>
  </div>

  <br/>

  <div class="field">
    <div class="form-group"><label class="col-sm-2 control-label">Select Client</label>
      <div class="row">
        <div class="col-sm-4">
          <%= f.collection_select :client_id, current_user.clients, :id, :name,
            {:class => 'prevent_collapse'},:class => "form-control m-b", :include_blank => 'Select' %>
        </div>
      </div>
    </div>
  </div>


  <br/>
  <div class="field">
    <div class="form-group"><label class="col-sm-2 control-label">Notes</label>
    <div class="col-sm-7">
      <%= f.text_area :notes, class:"form-control" %>
      <span class="help-block m-b-none"></span>
      <br>
    </div>
    </div>
  </div>

  <br/><br/><br/><br/><br/>

  <div class="field ">
    <div class="form-group"><label class="col-sm-2 control-label">Status</label>
      <div class="col-sm-4">
        <%= f.collection_select :status, ["Active", "Inactive", "On Hold"], :to_s, :to_s,
        {:class => 'prevent_collapse'},:class => "form-control m-b", :include_blank => 'Select' %>
      </div>
    </div>
  </div>

  <br/>
  <br/>

  <div class="col-lg-12">
    <%= fields_for(@recurring_shift) do |u| %>
      <br/><br/><br/><br/>
      <div class="row">
        <div class="col-sm-8">
          <h3>Recurring Shift</h3>
          <label class="font-normal">Would like to repeat this shift in the future?</label>
        </div>
      </div>
      <br/>
      <br/>
      <div class="row">
        <div class="field">
          <div class="form-group"><label class="col-sm-2 control-label">Frequency</label>
            <div class="col-sm-4">
              <%= u.select :frequency, options_for_select(@frequencies),
              {:class => 'prevent_collapse'},:class => "form-control m-b", :include_blank => 'Select' %>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group" id="data_1">
        <label class="control-label">End Repeat</label>
        <div class="input-group date col-sm-4">
            <span class="input-group-addon"><i class="fa fa-calendar"></i></span><%= u.text_field :time_span, class:"form-control", value:"#{@default_end_time}"%>
        </div>
      </div>

    <% end %>
  </div>


  <div class="actions">
    <%= f.submit nil, class: "btn btn-success block full-width m-b" %>
  </div>
<% end %>



<% content_for :javascript do %>

<script type="text/javascript">
  $(function() {

  $('#data_1 .input-group.date').datepicker({
        todayBtn: "linked",
        keyboardNavigation: false,
        forceParse: false,
        calendarWeeks: true,
        autoclose: true
    });

  });

</script>

<% end %>
